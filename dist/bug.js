!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Bug",[],e):"object"==typeof exports?exports.Bug=e():t.Bug=e()}(window,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){window,t.exports=function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return Object.defineProperty(t.prototype,"data",{get:function(){return{x:this.x,y:this.y}},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.toString=function(){return JSON.stringify(this.data)},t.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},t.radians=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2);e.Angle=o.default;var r=n(0);e.Point=r.default;var i=n(3);e.Vector=i.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.toRadians=function(t){return t*Math.PI/180},t.toDegrees=function(t){return 180*t/Math.PI},t.interpolate=function(e,n,o){return t.normalize(e+t.delta(e,n)*o)},t.delta=function(e,n){var o=t.normalize(e),r=t.normalize(n),i=r-o;return Math.abs(i)>Math.PI&&(i=r-2*Math.PI-o),i},t.normalize=function(t){var e=t%(2*Math.PI);return e<0&&(e+=2*Math.PI),e},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.model={},t instanceof o.default?(this.model.point=t.clone(),this.model.radians=e):(this.model.point=new o.default(t,e),this.model.radians=n)}return Object.defineProperty(t.prototype,"point",{get:function(){return this.model.point.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.model.point.x},set:function(t){this.model.point.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.model.point.y},set:function(t){this.model.point.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radians",{get:function(){return this.model.radians},set:function(t){this.model.radians=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return{x:this.x,y:this.y,radians:this.radians}},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.point,this.radians)},t.prototype.toString=function(){return JSON.stringify(this.data)},t}();e.default=r}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2);e.default=o.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(3),i=function(){function t(t){void 0===t&&(t={});var e=t.x,n=void 0===e?0:e,i=t.y,a=void 0===i?0:i,s=t.radians,u=void 0===s?0:s,c=t.target||{},f=c.x,l=void 0===f?0:f,d=c.y,p=void 0===d?0:d;this.model={segments:[new r.default({vector:new o.Vector(n,a,u)})],target:new o.Point(l,p),progress:0,step:0,maxSteps:2},this.target=this.model.target}return t.prototype.tick=function(t){var e=this;void 0===t&&(t=1),this.model.progress=Math.min(1,this.model.progress+.1);var n=this.model.progress>=1;return this.model.segments.forEach(function(t){t.tick(e.model.progress),n&&t.step()}),n&&(this.model.progress=0,this.model.step+=1,this.model.step>=this.model.maxSteps&&(this.model.step=0)),this},Object.defineProperty(t.prototype,"target",{get:function(){return this.model.target.data},set:function(t){this.model.target.x=t.x,this.model.target.y=t.y,this.model.segments[0].target=this.model.target},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.model.segments[0].x},set:function(t){this.model.segments[0].x=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.model.segments[0].y},set:function(t){this.model.segments[0].y=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radians",{get:function(){return this.model.segments[0].radians},set:function(t){this.model.segments[0].radians=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"segments",{get:function(){return this.model.segments.map(function(t){return t.data})},enumerable:!0,configurable:!0}),t}();e.default=i},function(t,e,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(4),a=function(){function t(t){var e=this;this.model={vector:new r.Vector,legs:[[new i.default({joints:[new r.Point(2,-5),new r.Point(12,-14)]}),new i.default({joints:[new r.Point(0,-5),new r.Point(0,-16)]}),new i.default({joints:[new r.Point(-4,-5),new r.Point(-8,-12)]})],[new i.default({joints:[new r.Point(2,5),new r.Point(12,14)]}),new i.default({joints:[new r.Point(0,5),new r.Point(0,16)]}),new i.default({joints:[new r.Point(-4,5),new r.Point(-8,12)]})]],maxRotation:.5*Math.PI,maxDistance:10,target:new r.Point,vectorStart:new r.Vector,step:0},this.model=o({},this.model,t),this.model.vectorStart=this.model.vector.clone(),this.model.legs.forEach(function(t){t.forEach(function(t){t.offsetAll(e.model.vector)})}),this.step()}return Object.defineProperty(t.prototype,"target",{get:function(){return this.model.target.clone()},set:function(t){this.model.target=t},enumerable:!0,configurable:!0}),t.prototype.tick=function(t){void 0===t&&(t=0);var e=this.model,n=e.target,o=e.vectorStart,i=e.maxDistance,a=Math.min(i,r.Point.distance(n,o.point));this.moveSegment(t,a),this.moveLegs(t,a)},t.prototype.step=function(){this.model.vectorStart=this.model.vector.clone(),this.model.step=(this.model.step+1)%this.model.legs.length,this.model.legs.forEach(function(t){t.forEach(function(t){t.step()})})},t.prototype.moveSegment=function(t,e){var n=this.model,o=n.target,i=n.vector,a=n.vectorStart,s=n.maxRotation,u=Math.atan2(o.y-a.y,o.x-a.x),c=Math.max(-s,Math.min(s,r.Angle.delta(i.radians,u)));i.radians=r.Angle.normalize(a.radians)+c*t,i.x=a.x+Math.cos(i.radians)*(e*t),i.y=a.y+Math.sin(i.radians)*(e*t)},t.prototype.moveLegs=function(t,e){var n=this,o=this.model,i=o.legs,a=o.vector,s=o.vectorStart;i.forEach(function(o,i){if(o.forEach(function(t){t.offset(a)}),i===n.model.step){var u=new r.Vector(s.x+Math.cos(a.radians)*e,s.y+Math.sin(a.radians)*e,a.radians);o.forEach(function(e){e.tick(u,t)})}})},Object.defineProperty(t.prototype,"x",{get:function(){return this.model.vector.x},set:function(t){this.model.vector.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.model.vector.y},set:function(t){this.model.vector.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radians",{get:function(){return this.model.vector.radians},set:function(t){this.model.vector.radians=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return o({},this.model.vector.data,{legs:this.model.legs.map(function(t){return t.map(function(t){return t.data})})})},enumerable:!0,configurable:!0}),t}();e.default=a},function(t,e,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(t){this.model=o({},t,{map:this.clone(t.joints).map(function(t){return new r.Vector(t.x,t.y,Math.atan2(t.y,t.x))}),jointsStart:this.clone(t.joints)})}return t.prototype.offset=function(t,e){void 0===e&&(e=0);var n=this.model,o=n.joints,i=n.map,a=o[e],s=i[e],u=r.Point.distance(s.point,new r.Point(0,0)),c=s.radians+t.radians;a.x=t.x+Math.cos(c)*u,a.y=t.y+Math.sin(c)*u},t.prototype.offsetAll=function(t){var e=this;this.model.joints.forEach(function(n,o){e.offset(t,o)})},t.prototype.tick=function(t,e){var n=this.model,o=n.joints,i=n.jointsStart,a=n.map,s=o.length-1,u=Math.atan2(a[s].y,a[s].x)+t.radians,c=r.Point.distance(a[s].point,new r.Point),f=new r.Point(t.x+Math.cos(u)*c,t.y+Math.sin(u)*c),l=Math.atan2(f.y-i[s].y,f.x-i[s].x),d=r.Point.distance(f,i[s]);o[s].x=i[s].x+Math.cos(l)*(d*e),o[s].y=i[s].y+Math.sin(l)*(d*e)},t.prototype.step=function(){this.model.jointsStart=this.clone()},Object.defineProperty(t.prototype,"data",{get:function(){return this.model.joints.map(function(t){return t.data})},enumerable:!0,configurable:!0}),t.prototype.clone=function(t){return void 0===t&&(t=this.model.joints),t.map(function(t){return t.clone()})},t}();e.default=i}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9CdWcvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL0J1Zy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9CdWcvLi9ub2RlX21vZHVsZXMvQGFkcmlhbmxhZm9uZC9nZW9tL2Rpc3QvZ2VvbS5qcyIsIndlYnBhY2s6Ly9CdWcvLi9zcmMvYnVnL2luZGV4LnRzIiwid2VicGFjazovL0J1Zy8uL3NyYy9idWcvYnVnLnRzIiwid2VicGFjazovL0J1Zy8uL3NyYy9idWcvc2VnbWVudC50cyIsIndlYnBhY2s6Ly9CdWcvLi9zcmMvYnVnL2xlZy50cyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ3aW5kb3ciLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZSIsImRlZmF1bHQiLCJ0aGlzIiwieCIsInkiLCJjb25maWd1cmFibGUiLCJjbG9uZSIsImFkZCIsInN1YnRyYWN0IiwidG9TdHJpbmciLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsImRpc3RhbmNlIiwiTWF0aCIsInNxcnQiLCJyYWRpYW5zIiwiYXRhbjIiLCJBbmdsZSIsIlBvaW50IiwiVmVjdG9yIiwidG9SYWRpYW5zIiwiUEkiLCJ0b0RlZ3JlZXMiLCJpbnRlcnBvbGF0ZSIsIm5vcm1hbGl6ZSIsImRlbHRhIiwiYWJzIiwibW9kZWwiLCJwb2ludCIsInNldCIsImJ1Z18xIiwiZ2VvbV8xIiwic2VnbWVudF8xIiwiQnVnIiwib3B0aW9ucyIsIl9hIiwiX2IiLCJfYyIsIl9kIiwidGFyZ2V0IiwiX2UiLCJ0YXJnZXRYIiwiX2YiLCJ0YXJnZXRZIiwic2VnbWVudHMiLCJ2ZWN0b3IiLCJwcm9ncmVzcyIsInN0ZXAiLCJtYXhTdGVwcyIsInRpY2siLCJfdGhpcyIsIm1pbiIsImlzU3RlcENvbXBsZXRlIiwiZm9yRWFjaCIsInNlZ21lbnQiLCJtYXAiLCJfX2Fzc2lnbiIsImFzc2lnbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsImFwcGx5IiwibGVnXzEiLCJTZWdtZW50IiwibGVncyIsImpvaW50cyIsIm1heFJvdGF0aW9uIiwibWF4RGlzdGFuY2UiLCJ2ZWN0b3JTdGFydCIsInNpZGUiLCJsZWciLCJvZmZzZXRBbGwiLCJtb3ZlU2VnbWVudCIsIm1vdmVMZWdzIiwidGFyZ2V0UmFkaWFucyIsImRlbHRhUmFkaWFucyIsIm1heCIsImNvcyIsInNpbiIsInNpZGVJbmRleCIsIm9mZnNldCIsInRhcmdldFZlY3Rvcl8xIiwiTGVnIiwiam9pbnRzU3RhcnQiLCJpbmRleCIsImpvaW50IiwibWFwSm9pbnQiLCJyYWRpdXMiLCJsYW5kIiwibGFuZFJhZGlhbnMiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsaUJBQUFDLFNBQUEsaUJBQUFDLE9BQ0FBLE9BQUFELFFBQUFELElBQ0EsbUJBQUFHLGVBQUFDLElBQ0FELE9BQUEsU0FBQUgsR0FDQSxpQkFBQUMsUUFDQUEsUUFBQSxJQUFBRCxJQUVBRCxFQUFBLElBQUFDLElBUkEsQ0FTQ0ssT0FBQSxXQUNELG1CQ1RBLElBQUFDLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQVAsUUFHQSxJQUFBQyxFQUFBSSxFQUFBRSxHQUFBLENBQ0FDLEVBQUFELEVBQ0FFLEdBQUEs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ImJ1Zy5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwiQnVnXCIsIFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIkJ1Z1wiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJCdWdcIl0gPSBmYWN0b3J5KCk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbiIsIiFmdW5jdGlvbih0LGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiR2VvbVwiLFtdLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuR2VvbT1lKCk6dC5HZW9tPWUoKX0od2luZG93LGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBlPXt9O2Z1bmN0aW9uIG4ocil7aWYoZVtyXSlyZXR1cm4gZVtyXS5leHBvcnRzO3ZhciBvPWVbcl09e2k6cixsOiExLGV4cG9ydHM6e319O3JldHVybiB0W3JdLmNhbGwoby5leHBvcnRzLG8sby5leHBvcnRzLG4pLG8ubD0hMCxvLmV4cG9ydHN9cmV0dXJuIG4ubT10LG4uYz1lLG4uZD1mdW5jdGlvbih0LGUscil7bi5vKHQsZSl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse2VudW1lcmFibGU6ITAsZ2V0OnJ9KX0sbi5yPWZ1bmN0aW9uKHQpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZTpcIk1vZHVsZVwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSl9LG4udD1mdW5jdGlvbih0LGUpe2lmKDEmZSYmKHQ9bih0KSksOCZlKXJldHVybiB0O2lmKDQmZSYmXCJvYmplY3RcIj09dHlwZW9mIHQmJnQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgcj1PYmplY3QuY3JlYXRlKG51bGwpO2lmKG4ucihyKSxPYmplY3QuZGVmaW5lUHJvcGVydHkocixcImRlZmF1bHRcIix7ZW51bWVyYWJsZTohMCx2YWx1ZTp0fSksMiZlJiZcInN0cmluZ1wiIT10eXBlb2YgdClmb3IodmFyIG8gaW4gdCluLmQocixvLGZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfS5iaW5kKG51bGwsbykpO3JldHVybiByfSxuLm49ZnVuY3Rpb24odCl7dmFyIGU9dCYmdC5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIHQuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gdH07cmV0dXJuIG4uZChlLFwiYVwiLGUpLGV9LG4ubz1mdW5jdGlvbih0LGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKX0sbi5wPVwiXCIsbihuLnM9MSl9KFtmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dm9pZCAwPT09dCYmKHQ9MCksdm9pZCAwPT09ZSYmKGU9MCksdGhpcy54PXQsdGhpcy55PWV9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImRhdGFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJue3g6dGhpcy54LHk6dGhpcy55fX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgdCh0aGlzLngsdGhpcy55KX0sdC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLngrPXQueCx0aGlzLnkrPXQueSx0aGlzfSx0LnByb3RvdHlwZS5zdWJ0cmFjdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54LT10LngsdGhpcy55LT10LnksdGhpc30sdC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy5kYXRhKX0sdC5kaXN0YW5jZT1mdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLnNxcnQoKHQueC1lLngpKih0LngtZS54KSsodC55LWUueSkqKHQueS1lLnkpKX0sdC5yYWRpYW5zPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE1hdGguYXRhbjIoZS55LXQueSxlLngtdC54KX0sdH0oKTtlLmRlZmF1bHQ9cn0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByPW4oMik7ZS5BbmdsZT1yLmRlZmF1bHQ7dmFyIG89bigwKTtlLlBvaW50PW8uZGVmYXVsdDt2YXIgaT1uKDMpO2UuVmVjdG9yPWkuZGVmYXVsdH0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC50b1JhZGlhbnM9ZnVuY3Rpb24odCl7cmV0dXJuIHQqTWF0aC5QSS8xODB9LHQudG9EZWdyZWVzPWZ1bmN0aW9uKHQpe3JldHVybiAxODAqdC9NYXRoLlBJfSx0LmludGVycG9sYXRlPWZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gdC5ub3JtYWxpemUoZSt0LmRlbHRhKGUsbikqcil9LHQuZGVsdGE9ZnVuY3Rpb24oZSxuKXt2YXIgcj10Lm5vcm1hbGl6ZShlKSxvPXQubm9ybWFsaXplKG4pLGk9by1yO3JldHVybiBNYXRoLmFicyhpKT5NYXRoLlBJJiYoaT1vLTIqTWF0aC5QSS1yKSxpfSx0Lm5vcm1hbGl6ZT1mdW5jdGlvbih0KXt2YXIgZT10JSgyKk1hdGguUEkpO3JldHVybiBlPDAmJihlKz0yKk1hdGguUEkpLGV9LHR9KCk7ZS5kZWZhdWx0PXJ9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcj1uKDApLG89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxuKXt2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT1uJiYobj0wKSx0aGlzLm1vZGVsPXt9LHQgaW5zdGFuY2VvZiByLmRlZmF1bHQ/KHRoaXMubW9kZWwucG9pbnQ9dC5jbG9uZSgpLHRoaXMubW9kZWwucmFkaWFucz1lKToodGhpcy5tb2RlbC5wb2ludD1uZXcgci5kZWZhdWx0KHQsZSksdGhpcy5tb2RlbC5yYWRpYW5zPW4pfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJwb2ludFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb2RlbC5wb2ludC5jbG9uZSgpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kZWwucG9pbnQueH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMubW9kZWwucG9pbnQueD10fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kZWwucG9pbnQueX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMubW9kZWwucG9pbnQueT10fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInJhZGlhbnNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kZWwucmFkaWFuc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMubW9kZWwucmFkaWFucz10fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImRhdGFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJue3g6dGhpcy54LHk6dGhpcy55LHJhZGlhbnM6dGhpcy5yYWRpYW5zfX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgdCh0aGlzLnBvaW50LHRoaXMucmFkaWFucyl9LHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMuZGF0YSl9LHR9KCk7ZS5kZWZhdWx0PW99XSl9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdlb20uanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgYnVnXzEgPSByZXF1aXJlKFwiLi9idWdcIik7XG5leHBvcnRzLmRlZmF1bHQgPSBidWdfMS5kZWZhdWx0O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgZ2VvbV8xID0gcmVxdWlyZShcIkBhZHJpYW5sYWZvbmQvZ2VvbVwiKTtcbnZhciBzZWdtZW50XzEgPSByZXF1aXJlKFwiLi9zZWdtZW50XCIpO1xudmFyIEJ1ZyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCdWcob3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxuICAgICAgICB2YXIgX2EgPSBvcHRpb25zLngsIHggPSBfYSA9PT0gdm9pZCAwID8gMCA6IF9hLCBfYiA9IG9wdGlvbnMueSwgeSA9IF9iID09PSB2b2lkIDAgPyAwIDogX2IsIF9jID0gb3B0aW9ucy5yYWRpYW5zLCByYWRpYW5zID0gX2MgPT09IHZvaWQgMCA/IDAgOiBfYztcbiAgICAgICAgdmFyIF9kID0gb3B0aW9ucy50YXJnZXQgfHwge30sIF9lID0gX2QueCwgdGFyZ2V0WCA9IF9lID09PSB2b2lkIDAgPyAwIDogX2UsIF9mID0gX2QueSwgdGFyZ2V0WSA9IF9mID09PSB2b2lkIDAgPyAwIDogX2Y7XG4gICAgICAgIHRoaXMubW9kZWwgPSB7XG4gICAgICAgICAgICBzZWdtZW50czogW25ldyBzZWdtZW50XzEuZGVmYXVsdCh7XG4gICAgICAgICAgICAgICAgICAgIHZlY3RvcjogbmV3IGdlb21fMS5WZWN0b3IoeCwgeSwgcmFkaWFucyksXG4gICAgICAgICAgICAgICAgfSldLFxuICAgICAgICAgICAgdGFyZ2V0OiBuZXcgZ2VvbV8xLlBvaW50KHRhcmdldFgsIHRhcmdldFkpLFxuICAgICAgICAgICAgcHJvZ3Jlc3M6IDAsXG4gICAgICAgICAgICBzdGVwOiAwLFxuICAgICAgICAgICAgbWF4U3RlcHM6IDIsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGhpcy5tb2RlbC50YXJnZXQ7XG4gICAgfVxuICAgIEJ1Zy5wcm90b3R5cGUudGljayA9IGZ1bmN0aW9uIChkZWx0YSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoZGVsdGEgPT09IHZvaWQgMCkgeyBkZWx0YSA9IDE7IH1cbiAgICAgICAgLy8gVE9ETzogSW5jb3Jwb3JhdGUgZGVsdGEgYXMgYW4gb3B0aW9uPyBNYWtlcyBmb3IgdW5zbW9vdGggYW5pbWF0aW9uIGV2ZW5cbiAgICAgICAgLy8gaWYgaW5jb3Jwb3JhdGluZyBpdCBpcyBtb3JlIFwiYWNjdXJhdGVcIi5cbiAgICAgICAgdGhpcy5tb2RlbC5wcm9ncmVzcyA9IE1hdGgubWluKDEsIHRoaXMubW9kZWwucHJvZ3Jlc3MgKyAwLjEpOyAvLyAqIGRlbHRhXG4gICAgICAgIHZhciBpc1N0ZXBDb21wbGV0ZSA9IHRoaXMubW9kZWwucHJvZ3Jlc3MgPj0gMTtcbiAgICAgICAgdGhpcy5tb2RlbC5zZWdtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChzZWdtZW50KSB7XG4gICAgICAgICAgICBzZWdtZW50LnRpY2soX3RoaXMubW9kZWwucHJvZ3Jlc3MpO1xuICAgICAgICAgICAgaWYgKGlzU3RlcENvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgc2VnbWVudC5zdGVwKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoaXNTdGVwQ29tcGxldGUpIHtcbiAgICAgICAgICAgIHRoaXMubW9kZWwucHJvZ3Jlc3MgPSAwO1xuICAgICAgICAgICAgdGhpcy5tb2RlbC5zdGVwICs9IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5tb2RlbC5zdGVwID49IHRoaXMubW9kZWwubWF4U3RlcHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsLnN0ZXAgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1Zy5wcm90b3R5cGUsIFwidGFyZ2V0XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tb2RlbC50YXJnZXQuZGF0YTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMubW9kZWwudGFyZ2V0LnggPSB2YWx1ZS54O1xuICAgICAgICAgICAgdGhpcy5tb2RlbC50YXJnZXQueSA9IHZhbHVlLnk7XG4gICAgICAgICAgICB0aGlzLm1vZGVsLnNlZ21lbnRzWzBdLnRhcmdldCA9IHRoaXMubW9kZWwudGFyZ2V0O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVnLnByb3RvdHlwZSwgXCJ4XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tb2RlbC5zZWdtZW50c1swXS54O1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5tb2RlbC5zZWdtZW50c1swXS54ID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWcucHJvdG90eXBlLCBcInlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1vZGVsLnNlZ21lbnRzWzBdLnk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGVsLnNlZ21lbnRzWzBdLnkgPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1Zy5wcm90b3R5cGUsIFwicmFkaWFuc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubW9kZWwuc2VnbWVudHNbMF0ucmFkaWFucztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMubW9kZWwuc2VnbWVudHNbMF0ucmFkaWFucyA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVnLnByb3RvdHlwZSwgXCJzZWdtZW50c1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubW9kZWwuc2VnbWVudHMubWFwKGZ1bmN0aW9uIChzZWdtZW50KSB7IHJldHVybiBzZWdtZW50LmRhdGE7IH0pO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gQnVnO1xufSgpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IEJ1ZztcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBnZW9tXzEgPSByZXF1aXJlKFwiQGFkcmlhbmxhZm9uZC9nZW9tXCIpO1xudmFyIGxlZ18xID0gcmVxdWlyZShcIi4vbGVnXCIpO1xudmFyIFNlZ21lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2VnbWVudChvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMubW9kZWwgPSB7XG4gICAgICAgICAgICB2ZWN0b3I6IG5ldyBnZW9tXzEuVmVjdG9yKCksXG4gICAgICAgICAgICBsZWdzOiBbXG4gICAgICAgICAgICAgICAgW25ldyBsZWdfMS5kZWZhdWx0KHsgam9pbnRzOiBbbmV3IGdlb21fMS5Qb2ludCgyLCAtNSksIG5ldyBnZW9tXzEuUG9pbnQoMTIsIC0xNCldIH0pLFxuICAgICAgICAgICAgICAgICAgICBuZXcgbGVnXzEuZGVmYXVsdCh7IGpvaW50czogW25ldyBnZW9tXzEuUG9pbnQoMCwgLTUpLCBuZXcgZ2VvbV8xLlBvaW50KDAsIC0xNildIH0pLFxuICAgICAgICAgICAgICAgICAgICBuZXcgbGVnXzEuZGVmYXVsdCh7IGpvaW50czogW25ldyBnZW9tXzEuUG9pbnQoLTQsIC01KSwgbmV3IGdlb21fMS5Qb2ludCgtOCwgLTEyKV0gfSldLFxuICAgICAgICAgICAgICAgIFtuZXcgbGVnXzEuZGVmYXVsdCh7IGpvaW50czogW25ldyBnZW9tXzEuUG9pbnQoMiwgNSksIG5ldyBnZW9tXzEuUG9pbnQoMTIsIDE0KV0gfSksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBsZWdfMS5kZWZhdWx0KHsgam9pbnRzOiBbbmV3IGdlb21fMS5Qb2ludCgwLCA1KSwgbmV3IGdlb21fMS5Qb2ludCgwLCAxNildIH0pLFxuICAgICAgICAgICAgICAgICAgICBuZXcgbGVnXzEuZGVmYXVsdCh7IGpvaW50czogW25ldyBnZW9tXzEuUG9pbnQoLTQsIDUpLCBuZXcgZ2VvbV8xLlBvaW50KC04LCAxMildIH0pXSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBtYXhSb3RhdGlvbjogTWF0aC5QSSAqIDAuNSxcbiAgICAgICAgICAgIG1heERpc3RhbmNlOiAxMCxcbiAgICAgICAgICAgIHRhcmdldDogbmV3IGdlb21fMS5Qb2ludCgpLFxuICAgICAgICAgICAgdmVjdG9yU3RhcnQ6IG5ldyBnZW9tXzEuVmVjdG9yKCksXG4gICAgICAgICAgICBzdGVwOiAwLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm1vZGVsID0gX19hc3NpZ24oe30sIHRoaXMubW9kZWwsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm1vZGVsLnZlY3RvclN0YXJ0ID0gdGhpcy5tb2RlbC52ZWN0b3IuY2xvbmUoKTtcbiAgICAgICAgdGhpcy5tb2RlbC5sZWdzLmZvckVhY2goZnVuY3Rpb24gKHNpZGUpIHtcbiAgICAgICAgICAgIHNpZGUuZm9yRWFjaChmdW5jdGlvbiAobGVnKSB7XG4gICAgICAgICAgICAgICAgbGVnLm9mZnNldEFsbChfdGhpcy5tb2RlbC52ZWN0b3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN0ZXAoKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNlZ21lbnQucHJvdG90eXBlLCBcInRhcmdldFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubW9kZWwudGFyZ2V0LmNsb25lKCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGVsLnRhcmdldCA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTZWdtZW50LnByb3RvdHlwZS50aWNrID0gZnVuY3Rpb24gKHByb2dyZXNzKSB7XG4gICAgICAgIGlmIChwcm9ncmVzcyA9PT0gdm9pZCAwKSB7IHByb2dyZXNzID0gMDsgfVxuICAgICAgICB2YXIgX2EgPSB0aGlzLm1vZGVsLCB0YXJnZXQgPSBfYS50YXJnZXQsIHZlY3RvclN0YXJ0ID0gX2EudmVjdG9yU3RhcnQsIG1heERpc3RhbmNlID0gX2EubWF4RGlzdGFuY2U7XG4gICAgICAgIHZhciBkaXN0YW5jZSA9IE1hdGgubWluKG1heERpc3RhbmNlLCBnZW9tXzEuUG9pbnQuZGlzdGFuY2UodGFyZ2V0LCB2ZWN0b3JTdGFydC5wb2ludCkpO1xuICAgICAgICB0aGlzLm1vdmVTZWdtZW50KHByb2dyZXNzLCBkaXN0YW5jZSk7XG4gICAgICAgIHRoaXMubW92ZUxlZ3MocHJvZ3Jlc3MsIGRpc3RhbmNlKTtcbiAgICB9O1xuICAgIFNlZ21lbnQucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubW9kZWwudmVjdG9yU3RhcnQgPSB0aGlzLm1vZGVsLnZlY3Rvci5jbG9uZSgpO1xuICAgICAgICB0aGlzLm1vZGVsLnN0ZXAgPSAodGhpcy5tb2RlbC5zdGVwICsgMSkgJSB0aGlzLm1vZGVsLmxlZ3MubGVuZ3RoO1xuICAgICAgICB0aGlzLm1vZGVsLmxlZ3MuZm9yRWFjaChmdW5jdGlvbiAoc2lkZSkge1xuICAgICAgICAgICAgc2lkZS5mb3JFYWNoKGZ1bmN0aW9uIChsZWcpIHtcbiAgICAgICAgICAgICAgICBsZWcuc3RlcCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU2VnbWVudC5wcm90b3R5cGUubW92ZVNlZ21lbnQgPSBmdW5jdGlvbiAocHJvZ3Jlc3MsIGRpc3RhbmNlKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMubW9kZWwsIHRhcmdldCA9IF9hLnRhcmdldCwgdmVjdG9yID0gX2EudmVjdG9yLCB2ZWN0b3JTdGFydCA9IF9hLnZlY3RvclN0YXJ0LCBtYXhSb3RhdGlvbiA9IF9hLm1heFJvdGF0aW9uO1xuICAgICAgICB2YXIgdGFyZ2V0UmFkaWFucyA9IE1hdGguYXRhbjIodGFyZ2V0LnkgLSB2ZWN0b3JTdGFydC55LCB0YXJnZXQueCAtIHZlY3RvclN0YXJ0LngpO1xuICAgICAgICB2YXIgZGVsdGFSYWRpYW5zID0gTWF0aC5tYXgoLW1heFJvdGF0aW9uLCBNYXRoLm1pbihtYXhSb3RhdGlvbiwgZ2VvbV8xLkFuZ2xlLmRlbHRhKHZlY3Rvci5yYWRpYW5zLCB0YXJnZXRSYWRpYW5zKSkpO1xuICAgICAgICB2ZWN0b3IucmFkaWFucyA9IGdlb21fMS5BbmdsZS5ub3JtYWxpemUodmVjdG9yU3RhcnQucmFkaWFucykgKyBkZWx0YVJhZGlhbnMgKiBwcm9ncmVzcztcbiAgICAgICAgdmVjdG9yLnggPSB2ZWN0b3JTdGFydC54ICsgTWF0aC5jb3ModmVjdG9yLnJhZGlhbnMpICogKGRpc3RhbmNlICogcHJvZ3Jlc3MpO1xuICAgICAgICB2ZWN0b3IueSA9IHZlY3RvclN0YXJ0LnkgKyBNYXRoLnNpbih2ZWN0b3IucmFkaWFucykgKiAoZGlzdGFuY2UgKiBwcm9ncmVzcyk7XG4gICAgfTtcbiAgICBTZWdtZW50LnByb3RvdHlwZS5tb3ZlTGVncyA9IGZ1bmN0aW9uIChwcm9ncmVzcywgZGlzdGFuY2UpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hID0gdGhpcy5tb2RlbCwgbGVncyA9IF9hLmxlZ3MsIHZlY3RvciA9IF9hLnZlY3RvciwgdmVjdG9yU3RhcnQgPSBfYS52ZWN0b3JTdGFydDtcbiAgICAgICAgbGVncy5mb3JFYWNoKGZ1bmN0aW9uIChzaWRlLCBzaWRlSW5kZXgpIHtcbiAgICAgICAgICAgIHNpZGUuZm9yRWFjaChmdW5jdGlvbiAobGVnKSB7XG4gICAgICAgICAgICAgICAgbGVnLm9mZnNldCh2ZWN0b3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoc2lkZUluZGV4ID09PSBfdGhpcy5tb2RlbC5zdGVwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldFZlY3Rvcl8xID0gbmV3IGdlb21fMS5WZWN0b3IodmVjdG9yU3RhcnQueCArIE1hdGguY29zKHZlY3Rvci5yYWRpYW5zKSAqIGRpc3RhbmNlLCB2ZWN0b3JTdGFydC55ICsgTWF0aC5zaW4odmVjdG9yLnJhZGlhbnMpICogZGlzdGFuY2UsIHZlY3Rvci5yYWRpYW5zKTtcbiAgICAgICAgICAgICAgICBzaWRlLmZvckVhY2goZnVuY3Rpb24gKGxlZykge1xuICAgICAgICAgICAgICAgICAgICBsZWcudGljayh0YXJnZXRWZWN0b3JfMSwgcHJvZ3Jlc3MpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTZWdtZW50LnByb3RvdHlwZSwgXCJ4XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tb2RlbC52ZWN0b3IueDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMubW9kZWwudmVjdG9yLnggPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNlZ21lbnQucHJvdG90eXBlLCBcInlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1vZGVsLnZlY3Rvci55O1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5tb2RlbC52ZWN0b3IueSA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2VnbWVudC5wcm90b3R5cGUsIFwicmFkaWFuc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubW9kZWwudmVjdG9yLnJhZGlhbnM7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGVsLnZlY3Rvci5yYWRpYW5zID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTZWdtZW50LnByb3RvdHlwZSwgXCJkYXRhXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oe30sIHRoaXMubW9kZWwudmVjdG9yLmRhdGEsIHsgbGVnczogdGhpcy5tb2RlbC5sZWdzLm1hcChmdW5jdGlvbiAoc2lkZSkgeyByZXR1cm4gKHNpZGUubWFwKGZ1bmN0aW9uIChsZWcpIHsgcmV0dXJuIGxlZy5kYXRhOyB9KSk7IH0pIH0pO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gU2VnbWVudDtcbn0oKSk7XG5leHBvcnRzLmRlZmF1bHQgPSBTZWdtZW50O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGdlb21fMSA9IHJlcXVpcmUoXCJAYWRyaWFubGFmb25kL2dlb21cIik7XG52YXIgTGVnID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIExlZyhvcHRpb25zKSB7XG4gICAgICAgIHRoaXMubW9kZWwgPSBfX2Fzc2lnbih7fSwgb3B0aW9ucywgeyBtYXA6IHRoaXMuY2xvbmUob3B0aW9ucy5qb2ludHMpLm1hcChmdW5jdGlvbiAocG9pbnQpIHsgcmV0dXJuIG5ldyBnZW9tXzEuVmVjdG9yKHBvaW50LngsIHBvaW50LnksIE1hdGguYXRhbjIocG9pbnQueSwgcG9pbnQueCkpOyB9KSwgam9pbnRzU3RhcnQ6IHRoaXMuY2xvbmUob3B0aW9ucy5qb2ludHMpIH0pO1xuICAgIH1cbiAgICBMZWcucHJvdG90eXBlLm9mZnNldCA9IGZ1bmN0aW9uICh2ZWN0b3IsIGluZGV4KSB7XG4gICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gMDsgfVxuICAgICAgICB2YXIgX2EgPSB0aGlzLm1vZGVsLCBqb2ludHMgPSBfYS5qb2ludHMsIG1hcCA9IF9hLm1hcDtcbiAgICAgICAgdmFyIGpvaW50ID0gam9pbnRzW2luZGV4XTtcbiAgICAgICAgdmFyIG1hcEpvaW50ID0gbWFwW2luZGV4XTtcbiAgICAgICAgdmFyIGRpc3RhbmNlID0gZ2VvbV8xLlBvaW50LmRpc3RhbmNlKG1hcEpvaW50LnBvaW50LCBuZXcgZ2VvbV8xLlBvaW50KDAsIDApKTtcbiAgICAgICAgdmFyIHJhZGlhbnMgPSBtYXBKb2ludC5yYWRpYW5zICsgdmVjdG9yLnJhZGlhbnM7XG4gICAgICAgIGpvaW50LnggPSB2ZWN0b3IueCArIE1hdGguY29zKHJhZGlhbnMpICogZGlzdGFuY2U7XG4gICAgICAgIGpvaW50LnkgPSB2ZWN0b3IueSArIE1hdGguc2luKHJhZGlhbnMpICogZGlzdGFuY2U7XG4gICAgfTtcbiAgICBMZWcucHJvdG90eXBlLm9mZnNldEFsbCA9IGZ1bmN0aW9uICh2ZWN0b3IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5tb2RlbC5qb2ludHMuZm9yRWFjaChmdW5jdGlvbiAoam9pbnQsIGluZGV4KSB7XG4gICAgICAgICAgICBfdGhpcy5vZmZzZXQodmVjdG9yLCBpbmRleCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTGVnLnByb3RvdHlwZS50aWNrID0gZnVuY3Rpb24gKHZlY3RvciwgcHJvZ3Jlc3MpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcy5tb2RlbCwgam9pbnRzID0gX2Euam9pbnRzLCBqb2ludHNTdGFydCA9IF9hLmpvaW50c1N0YXJ0LCBtYXAgPSBfYS5tYXA7XG4gICAgICAgIHZhciBpbmRleCA9IGpvaW50cy5sZW5ndGggLSAxO1xuICAgICAgICB2YXIgcmFkaWFucyA9IE1hdGguYXRhbjIobWFwW2luZGV4XS55LCBtYXBbaW5kZXhdLngpICsgdmVjdG9yLnJhZGlhbnM7XG4gICAgICAgIHZhciByYWRpdXMgPSBnZW9tXzEuUG9pbnQuZGlzdGFuY2UobWFwW2luZGV4XS5wb2ludCwgbmV3IGdlb21fMS5Qb2ludCgpKTtcbiAgICAgICAgdmFyIGxhbmQgPSBuZXcgZ2VvbV8xLlBvaW50KHZlY3Rvci54ICsgTWF0aC5jb3MocmFkaWFucykgKiByYWRpdXMsIHZlY3Rvci55ICsgTWF0aC5zaW4ocmFkaWFucykgKiByYWRpdXMpO1xuICAgICAgICB2YXIgbGFuZFJhZGlhbnMgPSBNYXRoLmF0YW4yKGxhbmQueSAtIGpvaW50c1N0YXJ0W2luZGV4XS55LCBsYW5kLnggLSBqb2ludHNTdGFydFtpbmRleF0ueCk7XG4gICAgICAgIHZhciBkaXN0YW5jZSA9IGdlb21fMS5Qb2ludC5kaXN0YW5jZShsYW5kLCBqb2ludHNTdGFydFtpbmRleF0pO1xuICAgICAgICBqb2ludHNbaW5kZXhdLnggPSBqb2ludHNTdGFydFtpbmRleF0ueCArIE1hdGguY29zKGxhbmRSYWRpYW5zKSAqXG4gICAgICAgICAgICAoZGlzdGFuY2UgKiBwcm9ncmVzcyk7XG4gICAgICAgIGpvaW50c1tpbmRleF0ueSA9IGpvaW50c1N0YXJ0W2luZGV4XS55ICsgTWF0aC5zaW4obGFuZFJhZGlhbnMpICpcbiAgICAgICAgICAgIChkaXN0YW5jZSAqIHByb2dyZXNzKTtcbiAgICB9O1xuICAgIExlZy5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5tb2RlbC5qb2ludHNTdGFydCA9IHRoaXMuY2xvbmUoKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMZWcucHJvdG90eXBlLCBcImRhdGFcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1vZGVsLmpvaW50cy5tYXAoZnVuY3Rpb24gKGpvaW50KSB7IHJldHVybiBqb2ludC5kYXRhOyB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTGVnLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uIChqb2ludHMpIHtcbiAgICAgICAgaWYgKGpvaW50cyA9PT0gdm9pZCAwKSB7IGpvaW50cyA9IHRoaXMubW9kZWwuam9pbnRzOyB9XG4gICAgICAgIHJldHVybiBqb2ludHMubWFwKGZ1bmN0aW9uIChqb2ludCkgeyByZXR1cm4gam9pbnQuY2xvbmUoKTsgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gTGVnO1xufSgpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IExlZztcbiJdLCJzb3VyY2VSb290IjoiIn0=
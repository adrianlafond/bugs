!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("World",[],e):"object"==typeof exports?exports.World=e():t.World=e()}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}(r(1))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),o=["TL","T","L","TR","BL","R","B","BR"],i=["T","TR","TL","R","L","BR","BL","B"],u=["TR","R","T","BR","TL","B","L","BL"],c=["R","BR","TR","B","T","BL","TL","L"],l=["BR","B","R","BL","TL","L","T","TL"],s=["B","BL","BR","L","R","TL","TR","T"],a=["BL","L","B","TL","BR","T","R","TR"],f=["L","TL","BL","T","B","TR","BR","R"];function d(t){return!function(t){return t.occupants.size>0}(t)}var h=function(){function t(t,e,r){void 0===t&&(t=320),void 0===e&&(e=320),void 0===r&&(r=20),this.width=t,this.height=e,this.blockSize=r,this.createGrid()}return t.prototype.createGrid=function(){this.grid=[];for(var t=Math.floor(this.width/this.blockSize),e=Math.floor(this.height/this.blockSize),r=0;r<t;r++){this.grid[r]=[];for(var o=0;o<e;o++)this.grid[r][o]={point:new n.Point(r*this.blockSize+this.blockSize/2,o*this.blockSize+this.blockSize/2),column:r,row:o,occupants:new Set}}},t.prototype.fillBlock=function(t,e,r){var n=this.getBlockFromXY(t,e);return n&&n.occupants.add(r),n?n.point.clone():null},t.prototype.clearBlock=function(t,e,r){var n=this.getBlockFromXY(t,e);return n&&n.occupants.delete(r),n?n.point.clone():null},t.prototype.clear=function(){this.grid.forEach((function(t){t.forEach((function(t){t.occupants.clear()}))}))},t.prototype.navigateWorld=function(t,e){var r=this.getBlockFromXY(t.x,t.y);if(r){var o=n.Point.radians(t,e),i=Math.sqrt((this.blockSize+this.blockSize)*(this.blockSize+this.blockSize)),u=this.getBlockFromXY(t.x+Math.cos(o)*i,t.y+Math.sin(o)*i);return u&&(u=this.getBestBlock(r,u)),(u||r).point}return e},t.prototype.getBestBlock=function(t,e){var r=t.column,n=t.row,d=e.column,h=e.row;return r>d&&n>h?this.getOpenBlock(t,o):r===d&&n>h?this.getOpenBlock(t,i):r<d&&n>h?this.getOpenBlock(t,u):r<d&&n===h?this.getOpenBlock(t,c):r<d&&n<h?this.getOpenBlock(t,l):r===d&&n<h?this.getOpenBlock(t,s):r>d&&n<h?this.getOpenBlock(t,a):r>d&&n===h?this.getOpenBlock(t,f):t},t.prototype.getOpenBlock=function(t,e){for(var r=0,n=e;r<n.length;r++){var o=n[r],i=this.getBlockForDirection(t,o);if(i&&d(i)){if("TL"!==(a=o)&&"TR"!==a&&"BR"!==a&&"BL"!==a)return i;var u=void 0,c=void 0;switch(o){case"TL":u=this.getBlockForDirection(t,"T"),c=this.getBlockForDirection(t,"L");break;case"TR":u=this.getBlockForDirection(t,"R"),c=this.getBlockForDirection(t,"T");break;case"BR":u=this.getBlockForDirection(t,"B"),c=this.getBlockForDirection(t,"R");break;case"BL":u=this.getBlockForDirection(t,"L"),c=this.getBlockForDirection(t,"B")}var l=u&&d(u),s=c&&d(c);if(l&&s)return i;if(l&&!s)return u;if(!l&&s)return c}}var a;return t},t.prototype.getBlockForDirection=function(t,e){var r=t.column,n=t.row,o=this.maxGridLengths(),i=o.columns-1,u=o.rows-1;switch(e){case"TL":return r>0&&n>0?this.grid[r-1][n-1]:null;case"T":return n>0?this.grid[r][n-1]:null;case"TR":return r<i&&n>0?this.grid[r+1][n-1]:null;case"R":return r<i?this.grid[r+1][n]:null;case"BR":return r<i&&n<u?this.grid[r+1][n+1]:null;case"B":return n<u?this.grid[r][n+1]:null;case"BL":return r>0&&n<u?this.grid[r-1][n+1]:null;case"L":return r>0?this.grid[r-1][n]:null;default:return null}},t.prototype.getBlockFromXY=function(t,e){var r=this.maxGridLengths(),n=r.columns,o=r.rows,i=Math.max(0,Math.min(n-1,Math.floor(t/this.width*n))),u=Math.max(0,Math.min(o-1,Math.floor(e/this.height*o)));return this.grid[i]&&this.grid[i][u]?this.grid[i][u]:null},t.prototype.maxGridLengths=function(){return{columns:this.maxColumns(),rows:this.maxRows()}},t.prototype.maxColumns=function(){return this.grid.length},t.prototype.maxRows=function(){return this.grid[0].length},t}();e.World=h},function(t,e,r){window,t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return Object.defineProperty(t.prototype,"data",{get:function(){return{x:this.x,y:this.y}},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.toString=function(){return JSON.stringify(this.data)},t.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},t.radians=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},t}();e.default=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2);e.Angle=n.default;var o=r(0);e.Point=o.default;var i=r(3);e.Vector=i.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.toRadians=function(t){return t*Math.PI/180},t.toDegrees=function(t){return 180*t/Math.PI},t.interpolate=function(e,r,n){return t.normalize(e+t.delta(e,r)*n)},t.delta=function(e,r){var n=t.normalize(e),o=t.normalize(r),i=o-n;return Math.abs(i)>Math.PI&&(i=o-2*Math.PI-n),i},t.normalize=function(t){var e=t%(2*Math.PI);return e<0&&(e+=2*Math.PI),e},t}();e.default=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=function(){function t(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),this.model={},t instanceof n.default?(this.model.point=t.clone(),this.model.radians=e):(this.model.point=new n.default(t,e),this.model.radians=r)}return Object.defineProperty(t.prototype,"point",{get:function(){return this.model.point.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.model.point.x},set:function(t){this.model.point.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.model.point.y},set:function(t){this.model.point.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radians",{get:function(){return this.model.radians},set:function(t){this.model.radians=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return{x:this.x,y:this.y,radians:this.radians}},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.point,this.radians)},t.prototype.toString=function(){return JSON.stringify(this.data)},t}();e.default=o}])}])}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Xb3JsZC93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vV29ybGQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vV29ybGQvLi9zcmMvd29ybGQvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vV29ybGQvLi9zcmMvd29ybGQvd29ybGQudHMiLCJ3ZWJwYWNrOi8vV29ybGQvLi9ub2RlX21vZHVsZXMvQGFkcmlhbmxhZm9uZC9nZW9tL2Rpc3QvZ2VvbS5qcyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ3aW5kb3ciLCJlbnVtZXJhYmxlIiwiZ2V0IiwiZ2V0dGVyIiwidmFsdWUiLCJrZXkiLCJiaW5kIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwib2JqZWN0IiwicHJvcGVydHkiLCJkZWZpbmVQcm9wZXJ0eSIsIm0iLCJwIiwiX19leHBvcnQiLCJnZW9tXzEiLCJnbyIsImlzRW1wdHkiLCJibG9jayIsIm9jY3VwYW50cyIsInNpemUiLCJpc0ZpbGxlZCIsIldvcmxkIiwid2lkdGgiLCJoZWlnaHQiLCJibG9ja1NpemUiLCJ0aGlzIiwiY3JlYXRlR3JpZCIsImdyaWQiLCJjb2xzIiwiTWF0aCIsImZsb29yIiwicm93cyIsImMiLCJyIiwicG9pbnQiLCJQb2ludCIsImNvbHVtbiIsInJvdyIsIlNldCIsImZpbGxCbG9jayIsIngiLCJ5IiwiaWQiLCJnZXRCbG9ja0Zyb21YWSIsImFkZCIsImNsb25lIiwiY2xlYXJCbG9jayIsImRlbGV0ZSIsImNsZWFyIiwiZm9yRWFjaCIsImNvbCIsIm5hdmlnYXRlV29ybGQiLCJjdXJyZW50IiwidGFyZ2V0IiwiY3VycmVudEJsb2NrIiwicmFkaWFucyIsInJhZGl1cyIsInNxcnQiLCJ0YXJnZXRCbG9jayIsImNvcyIsInNpbiIsImdldEJlc3RCbG9jayIsImN4IiwiY3kiLCJ0eCIsInR5IiwiZ2V0T3BlbkJsb2NrIiwiZGlyZWN0aW9ucyIsIl9pIiwiZGlyZWN0aW9uc18xIiwibGVuZ3RoIiwiZGlyIiwiZ2V0QmxvY2tGb3JEaXJlY3Rpb24iLCJkaXJlY3Rpb24iLCJiMSIsImIyIiwiYjFPayIsImIyT2siLCJfYSIsIm1heEdyaWRMZW5ndGhzIiwibWF4Q29sdW1uIiwiY29sdW1ucyIsIm1heFJvdyIsIm1heCIsIm1pbiIsIm1heENvbHVtbnMiLCJtYXhSb3dzIiwidCIsImUiLCJuIiwibyIsImkiLCJsIiwiZCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwiX19lc01vZHVsZSIsImNyZWF0ZSIsImRlZmF1bHQiLCJzIiwiY29uZmlndXJhYmxlIiwic3VidHJhY3QiLCJ0b1N0cmluZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJkYXRhIiwiZGlzdGFuY2UiLCJhdGFuMiIsIkFuZ2xlIiwiVmVjdG9yIiwidG9SYWRpYW5zIiwiUEkiLCJ0b0RlZ3JlZXMiLCJpbnRlcnBvbGF0ZSIsIm5vcm1hbGl6ZSIsImRlbHRhIiwiYWJzIiwibW9kZWwiLCJzZXQiXSwibWFwcGluZ3MiOiJDQUFBLFNBQTJDQSxFQUFNQyxHQUMxQixpQkFBWkMsU0FBMEMsaUJBQVhDLE9BQ3hDQSxPQUFPRCxRQUFVRCxJQUNRLG1CQUFYRyxRQUF5QkEsT0FBT0MsSUFDOUNELE9BQU8sUUFBUyxHQUFJSCxHQUNNLGlCQUFaQyxRQUNkQSxRQUFlLE1BQUlELElBRW5CRCxFQUFZLE1BQUlDLElBUmxCLENBU0dLLFFBQVEsV0FDWCxPLFlDVEEsU0FHQSxjQUdBLFFBQ0Esb0JBR0EsWUFDQSxJQUNBLEtBQ0EsWUFVQSxPQU5BLG1DQUdBLE9BR0EsVUEwREEsT0FyREEsTUFHQSxNQUdBLG9CQUNBLFVBQ0EsMkJBQTJDQyxZQUFZLEVBQU1DLElBQUtDLEtBS2xFLGdCQUNBLGdEQUNBLDRDQUF5REMsTUFBTyxXQUVoRSxzQ0FBa0RBLE9BQU8sS0FRekQsa0JBRUEsR0FEQSxjQUNBLGFBQ0EscURBQ0EsMEJBR0EsR0FG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QUksU0FBUy9CLEdBQUc5RCxLQUFLNEYsTUFBTTlELFFBQVFnQyxHQUFHekYsWUFBVyxFQUFHc0csY0FBYSxJQUFLaEcsT0FBT00sZUFBZTZFLEVBQUVsRixVQUFVLE9BQU8sQ0FBQ04sSUFBSSxXQUFXLE1BQU0sQ0FBQ3lDLEVBQUVmLEtBQUtlLEVBQUVDLEVBQUVoQixLQUFLZ0IsRUFBRWMsUUFBUTlCLEtBQUs4QixVQUFVekQsWUFBVyxFQUFHc0csY0FBYSxJQUFLYixFQUFFbEYsVUFBVXdDLE1BQU0sV0FBVyxPQUFPLElBQUkwQyxFQUFFOUQsS0FBS1MsTUFBTVQsS0FBSzhCLFVBQVVnQyxFQUFFbEYsVUFBVWlHLFNBQVMsV0FBVyxPQUFPQyxLQUFLQyxVQUFVL0UsS0FBS2dGLE9BQU9sQixFQUFqa0MsR0FBc2tDQyxFQUFFVSxRQUFRUiIsImZpbGUiOiJ3b3JsZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwiV29ybGRcIiwgW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiV29ybGRcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiV29ybGRcIl0gPSBmYWN0b3J5KCk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gX19leHBvcnQobSkge1xuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcbn1cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL3dvcmxkXCIpKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGdlb21fMSA9IHJlcXVpcmUoXCJAYWRyaWFubGFmb25kL2dlb21cIik7XG52YXIgZ28gPSB7XG4gICAgVEw6IFsnVEwnLCAnVCcsICdMJywgJ1RSJywgJ0JMJywgJ1InLCAnQicsICdCUiddLFxuICAgIFQ6IFsnVCcsICdUUicsICdUTCcsICdSJywgJ0wnLCAnQlInLCAnQkwnLCAnQiddLFxuICAgIFRSOiBbJ1RSJywgJ1InLCAnVCcsICdCUicsICdUTCcsICdCJywgJ0wnLCAnQkwnXSxcbiAgICBSOiBbJ1InLCAnQlInLCAnVFInLCAnQicsICdUJywgJ0JMJywgJ1RMJywgJ0wnXSxcbiAgICBCUjogWydCUicsICdCJywgJ1InLCAnQkwnLCAnVEwnLCAnTCcsICdUJywgJ1RMJ10sXG4gICAgQjogWydCJywgJ0JMJywgJ0JSJywgJ0wnLCAnUicsICdUTCcsICdUUicsICdUJ10sXG4gICAgQkw6IFsnQkwnLCAnTCcsICdCJywgJ1RMJywgJ0JSJywgJ1QnLCAnUicsICdUUiddLFxuICAgIEw6IFsnTCcsICdUTCcsICdCTCcsICdUJywgJ0InLCAnVFInLCAnQlInLCAnUiddXG59O1xuZnVuY3Rpb24gaXNEaWFnb25hbChkaXJlY3Rpb24pIHtcbiAgICByZXR1cm4gZGlyZWN0aW9uID09PSAnVEwnIHx8IGRpcmVjdGlvbiA9PT0gJ1RSJyB8fCBkaXJlY3Rpb24gPT09ICdCUicgfHwgZGlyZWN0aW9uID09PSAnQkwnO1xufVxuZnVuY3Rpb24gaXNGaWxsZWQoYmxvY2spIHtcbiAgICByZXR1cm4gYmxvY2sub2NjdXBhbnRzLnNpemUgPiAwO1xufVxuZnVuY3Rpb24gaXNFbXB0eShibG9jaykge1xuICAgIHJldHVybiAhaXNGaWxsZWQoYmxvY2spO1xufVxudmFyIFdvcmxkID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFdvcmxkKHdpZHRoLCBoZWlnaHQsIGJsb2NrU2l6ZSkge1xuICAgICAgICBpZiAod2lkdGggPT09IHZvaWQgMCkgeyB3aWR0aCA9IDMyMDsgfVxuICAgICAgICBpZiAoaGVpZ2h0ID09PSB2b2lkIDApIHsgaGVpZ2h0ID0gMzIwOyB9XG4gICAgICAgIGlmIChibG9ja1NpemUgPT09IHZvaWQgMCkgeyBibG9ja1NpemUgPSAyMDsgfVxuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB0aGlzLmJsb2NrU2l6ZSA9IGJsb2NrU2l6ZTtcbiAgICAgICAgdGhpcy5jcmVhdGVHcmlkKCk7XG4gICAgfVxuICAgIFdvcmxkLnByb3RvdHlwZS5jcmVhdGVHcmlkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmdyaWQgPSBbXTtcbiAgICAgICAgdmFyIGNvbHMgPSBNYXRoLmZsb29yKHRoaXMud2lkdGggLyB0aGlzLmJsb2NrU2l6ZSk7XG4gICAgICAgIHZhciByb3dzID0gTWF0aC5mbG9vcih0aGlzLmhlaWdodCAvIHRoaXMuYmxvY2tTaXplKTtcbiAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCBjb2xzOyBjKyspIHtcbiAgICAgICAgICAgIHRoaXMuZ3JpZFtjXSA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgciA9IDA7IHIgPCByb3dzOyByKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdyaWRbY11bcl0gPSB7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50OiBuZXcgZ2VvbV8xLlBvaW50KGMgKiB0aGlzLmJsb2NrU2l6ZSArIHRoaXMuYmxvY2tTaXplIC8gMiwgciAqIHRoaXMuYmxvY2tTaXplICsgdGhpcy5ibG9ja1NpemUgLyAyKSxcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uOiBjLFxuICAgICAgICAgICAgICAgICAgICByb3c6IHIsXG4gICAgICAgICAgICAgICAgICAgIG9jY3VwYW50czogbmV3IFNldCgpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFdvcmxkLnByb3RvdHlwZS5maWxsQmxvY2sgPSBmdW5jdGlvbiAoeCwgeSwgaWQpIHtcbiAgICAgICAgdmFyIGJsb2NrID0gdGhpcy5nZXRCbG9ja0Zyb21YWSh4LCB5KTtcbiAgICAgICAgaWYgKGJsb2NrKSB7XG4gICAgICAgICAgICBibG9jay5vY2N1cGFudHMuYWRkKGlkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmxvY2sgPyBibG9jay5wb2ludC5jbG9uZSgpIDogbnVsbDtcbiAgICB9O1xuICAgIFdvcmxkLnByb3RvdHlwZS5jbGVhckJsb2NrID0gZnVuY3Rpb24gKHgsIHksIGlkKSB7XG4gICAgICAgIHZhciBibG9jayA9IHRoaXMuZ2V0QmxvY2tGcm9tWFkoeCwgeSk7XG4gICAgICAgIGlmIChibG9jaykge1xuICAgICAgICAgICAgYmxvY2sub2NjdXBhbnRzLmRlbGV0ZShpZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJsb2NrID8gYmxvY2sucG9pbnQuY2xvbmUoKSA6IG51bGw7XG4gICAgfTtcbiAgICBXb3JsZC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZ3JpZC5mb3JFYWNoKGZ1bmN0aW9uIChjb2wpIHtcbiAgICAgICAgICAgIGNvbC5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgICAgICAgICAgICByb3cub2NjdXBhbnRzLmNsZWFyKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBXb3JsZC5wcm90b3R5cGUubmF2aWdhdGVXb3JsZCA9IGZ1bmN0aW9uIChjdXJyZW50LCB0YXJnZXQpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRCbG9jayA9IHRoaXMuZ2V0QmxvY2tGcm9tWFkoY3VycmVudC54LCBjdXJyZW50LnkpO1xuICAgICAgICBpZiAoY3VycmVudEJsb2NrKSB7XG4gICAgICAgICAgICB2YXIgcmFkaWFucyA9IGdlb21fMS5Qb2ludC5yYWRpYW5zKGN1cnJlbnQsIHRhcmdldCk7XG4gICAgICAgICAgICB2YXIgcmFkaXVzID0gTWF0aC5zcXJ0KCh0aGlzLmJsb2NrU2l6ZSArIHRoaXMuYmxvY2tTaXplKSAqICh0aGlzLmJsb2NrU2l6ZSArIHRoaXMuYmxvY2tTaXplKSk7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0QmxvY2sgPSB0aGlzLmdldEJsb2NrRnJvbVhZKGN1cnJlbnQueCArIE1hdGguY29zKHJhZGlhbnMpICogcmFkaXVzLCBjdXJyZW50LnkgKyBNYXRoLnNpbihyYWRpYW5zKSAqIHJhZGl1cyk7XG4gICAgICAgICAgICBpZiAodGFyZ2V0QmxvY2spIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRCbG9jayA9IHRoaXMuZ2V0QmVzdEJsb2NrKGN1cnJlbnRCbG9jaywgdGFyZ2V0QmxvY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICh0YXJnZXRCbG9jayB8fCBjdXJyZW50QmxvY2spLnBvaW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfTtcbiAgICBXb3JsZC5wcm90b3R5cGUuZ2V0QmVzdEJsb2NrID0gZnVuY3Rpb24gKGN1cnJlbnRCbG9jaywgdGFyZ2V0QmxvY2spIHtcbiAgICAgICAgdmFyIGN4ID0gY3VycmVudEJsb2NrLmNvbHVtbiwgY3kgPSBjdXJyZW50QmxvY2sucm93O1xuICAgICAgICB2YXIgdHggPSB0YXJnZXRCbG9jay5jb2x1bW4sIHR5ID0gdGFyZ2V0QmxvY2sucm93O1xuICAgICAgICBpZiAoY3ggPiB0eCAmJiBjeSA+IHR5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRPcGVuQmxvY2soY3VycmVudEJsb2NrLCBnby5UTCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY3ggPT09IHR4ICYmIGN5ID4gdHkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE9wZW5CbG9jayhjdXJyZW50QmxvY2ssIGdvLlQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGN4IDwgdHggJiYgY3kgPiB0eSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3BlbkJsb2NrKGN1cnJlbnRCbG9jaywgZ28uVFIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGN4IDwgdHggJiYgY3kgPT09IHR5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRPcGVuQmxvY2soY3VycmVudEJsb2NrLCBnby5SKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjeCA8IHR4ICYmIGN5IDwgdHkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE9wZW5CbG9jayhjdXJyZW50QmxvY2ssIGdvLkJSKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjeCA9PT0gdHggJiYgY3kgPCB0eSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3BlbkJsb2NrKGN1cnJlbnRCbG9jaywgZ28uQik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY3ggPiB0eCAmJiBjeSA8IHR5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRPcGVuQmxvY2soY3VycmVudEJsb2NrLCBnby5CTCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY3ggPiB0eCAmJiBjeSA9PT0gdHkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE9wZW5CbG9jayhjdXJyZW50QmxvY2ssIGdvLkwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjdXJyZW50QmxvY2s7XG4gICAgfTtcbiAgICBXb3JsZC5wcm90b3R5cGUuZ2V0T3BlbkJsb2NrID0gZnVuY3Rpb24gKGN1cnJlbnRCbG9jaywgZGlyZWN0aW9ucykge1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGRpcmVjdGlvbnNfMSA9IGRpcmVjdGlvbnM7IF9pIDwgZGlyZWN0aW9uc18xLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGRpciA9IGRpcmVjdGlvbnNfMVtfaV07XG4gICAgICAgICAgICB2YXIgYmxvY2sgPSB0aGlzLmdldEJsb2NrRm9yRGlyZWN0aW9uKGN1cnJlbnRCbG9jaywgZGlyKTtcbiAgICAgICAgICAgIGlmIChibG9jayAmJiBpc0VtcHR5KGJsb2NrKSkge1xuICAgICAgICAgICAgICAgIGlmIChpc0RpYWdvbmFsKGRpcikpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGIxID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYjIgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZGlyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdUTCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYjEgPSB0aGlzLmdldEJsb2NrRm9yRGlyZWN0aW9uKGN1cnJlbnRCbG9jaywgJ1QnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiMiA9IHRoaXMuZ2V0QmxvY2tGb3JEaXJlY3Rpb24oY3VycmVudEJsb2NrLCAnTCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnVFInOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIxID0gdGhpcy5nZXRCbG9ja0ZvckRpcmVjdGlvbihjdXJyZW50QmxvY2ssICdSJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYjIgPSB0aGlzLmdldEJsb2NrRm9yRGlyZWN0aW9uKGN1cnJlbnRCbG9jaywgJ1QnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0JSJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiMSA9IHRoaXMuZ2V0QmxvY2tGb3JEaXJlY3Rpb24oY3VycmVudEJsb2NrLCAnQicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIyID0gdGhpcy5nZXRCbG9ja0ZvckRpcmVjdGlvbihjdXJyZW50QmxvY2ssICdSJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdCTCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYjEgPSB0aGlzLmdldEJsb2NrRm9yRGlyZWN0aW9uKGN1cnJlbnRCbG9jaywgJ0wnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiMiA9IHRoaXMuZ2V0QmxvY2tGb3JEaXJlY3Rpb24oY3VycmVudEJsb2NrLCAnQicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgYjFPayA9IGIxICYmIGlzRW1wdHkoYjEpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYjJPayA9IGIyICYmIGlzRW1wdHkoYjIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYjFPayAmJiBiMk9rKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmxvY2s7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYjFPayAmJiAhYjJPaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFiMU9rICYmIGIyT2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiMjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJsb2NrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3VycmVudEJsb2NrO1xuICAgIH07XG4gICAgV29ybGQucHJvdG90eXBlLmdldEJsb2NrRm9yRGlyZWN0aW9uID0gZnVuY3Rpb24gKGN1cnJlbnRCbG9jaywgZGlyZWN0aW9uKSB7XG4gICAgICAgIHZhciBjeCA9IGN1cnJlbnRCbG9jay5jb2x1bW4sIGN5ID0gY3VycmVudEJsb2NrLnJvdztcbiAgICAgICAgdmFyIF9hID0gdGhpcy5tYXhHcmlkTGVuZ3RocygpLCBjb2x1bW5zID0gX2EuY29sdW1ucywgcm93cyA9IF9hLnJvd3M7XG4gICAgICAgIHZhciBtYXhDb2x1bW4gPSBjb2x1bW5zIC0gMTtcbiAgICAgICAgdmFyIG1heFJvdyA9IHJvd3MgLSAxO1xuICAgICAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgY2FzZSAnVEwnOlxuICAgICAgICAgICAgICAgIHJldHVybiBjeCA+IDAgJiYgY3kgPiAwID8gdGhpcy5ncmlkW2N4IC0gMV1bY3kgLSAxXSA6IG51bGw7XG4gICAgICAgICAgICBjYXNlICdUJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gY3kgPiAwID8gdGhpcy5ncmlkW2N4XVtjeSAtIDFdIDogbnVsbDtcbiAgICAgICAgICAgIGNhc2UgJ1RSJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gY3ggPCBtYXhDb2x1bW4gJiYgY3kgPiAwID8gdGhpcy5ncmlkW2N4ICsgMV1bY3kgLSAxXSA6IG51bGw7XG4gICAgICAgICAgICBjYXNlICdSJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gY3ggPCBtYXhDb2x1bW4gPyB0aGlzLmdyaWRbY3ggKyAxXVtjeV0gOiBudWxsO1xuICAgICAgICAgICAgY2FzZSAnQlInOlxuICAgICAgICAgICAgICAgIHJldHVybiBjeCA8IG1heENvbHVtbiAmJiBjeSA8IG1heFJvdyA/IHRoaXMuZ3JpZFtjeCArIDFdW2N5ICsgMV0gOiBudWxsO1xuICAgICAgICAgICAgY2FzZSAnQic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN5IDwgbWF4Um93ID8gdGhpcy5ncmlkW2N4XVtjeSArIDFdIDogbnVsbDtcbiAgICAgICAgICAgIGNhc2UgJ0JMJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gY3ggPiAwICYmIGN5IDwgbWF4Um93ID8gdGhpcy5ncmlkW2N4IC0gMV1bY3kgKyAxXSA6IG51bGw7XG4gICAgICAgICAgICBjYXNlICdMJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gY3ggPiAwID8gdGhpcy5ncmlkW2N4IC0gMV1bY3ldIDogbnVsbDtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFdvcmxkLnByb3RvdHlwZS5nZXRCbG9ja0Zyb21YWSA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMubWF4R3JpZExlbmd0aHMoKSwgY29sdW1ucyA9IF9hLmNvbHVtbnMsIHJvd3MgPSBfYS5yb3dzO1xuICAgICAgICB2YXIgY29sID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oY29sdW1ucyAtIDEsIE1hdGguZmxvb3IoeCAvIHRoaXMud2lkdGggKiBjb2x1bW5zKSkpO1xuICAgICAgICB2YXIgcm93ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4ocm93cyAtIDEsIE1hdGguZmxvb3IoeSAvIHRoaXMuaGVpZ2h0ICogcm93cykpKTtcbiAgICAgICAgcmV0dXJuICh0aGlzLmdyaWRbY29sXSAmJiB0aGlzLmdyaWRbY29sXVtyb3ddKSA/IHRoaXMuZ3JpZFtjb2xdW3Jvd10gOiBudWxsO1xuICAgIH07XG4gICAgV29ybGQucHJvdG90eXBlLm1heEdyaWRMZW5ndGhzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4geyBjb2x1bW5zOiB0aGlzLm1heENvbHVtbnMoKSwgcm93czogdGhpcy5tYXhSb3dzKCkgfTtcbiAgICB9O1xuICAgIFdvcmxkLnByb3RvdHlwZS5tYXhDb2x1bW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ncmlkLmxlbmd0aDtcbiAgICB9O1xuICAgIFdvcmxkLnByb3RvdHlwZS5tYXhSb3dzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ncmlkWzBdLmxlbmd0aDtcbiAgICB9O1xuICAgIHJldHVybiBXb3JsZDtcbn0oKSk7XG5leHBvcnRzLldvcmxkID0gV29ybGQ7XG4iLCIhZnVuY3Rpb24odCxlKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcIkdlb21cIixbXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzLkdlb209ZSgpOnQuR2VvbT1lKCl9KHdpbmRvdyxmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgZT17fTtmdW5jdGlvbiBuKHIpe2lmKGVbcl0pcmV0dXJuIGVbcl0uZXhwb3J0czt2YXIgbz1lW3JdPXtpOnIsbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gdFtyXS5jYWxsKG8uZXhwb3J0cyxvLG8uZXhwb3J0cyxuKSxvLmw9ITAsby5leHBvcnRzfXJldHVybiBuLm09dCxuLmM9ZSxuLmQ9ZnVuY3Rpb24odCxlLHIpe24ubyh0LGUpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHtlbnVtZXJhYmxlOiEwLGdldDpyfSl9LG4ucj1mdW5jdGlvbih0KXtcInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6XCJNb2R1bGVcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfSxuLnQ9ZnVuY3Rpb24odCxlKXtpZigxJmUmJih0PW4odCkpLDgmZSlyZXR1cm4gdDtpZig0JmUmJlwib2JqZWN0XCI9PXR5cGVvZiB0JiZ0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIHI9T2JqZWN0LmNyZWF0ZShudWxsKTtpZihuLnIociksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJkZWZhdWx0XCIse2VudW1lcmFibGU6ITAsdmFsdWU6dH0pLDImZSYmXCJzdHJpbmdcIiE9dHlwZW9mIHQpZm9yKHZhciBvIGluIHQpbi5kKHIsbyxmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX0uYmluZChudWxsLG8pKTtyZXR1cm4gcn0sbi5uPWZ1bmN0aW9uKHQpe3ZhciBlPXQmJnQuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiB0LmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIHR9O3JldHVybiBuLmQoZSxcImFcIixlKSxlfSxuLm89ZnVuY3Rpb24odCxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LG4ucD1cIlwiLG4obi5zPTEpfShbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3ZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PWUmJihlPTApLHRoaXMueD10LHRoaXMueT1lfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJkYXRhXCIse2dldDpmdW5jdGlvbigpe3JldHVybnt4OnRoaXMueCx5OnRoaXMueX19LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHQodGhpcy54LHRoaXMueSl9LHQucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54Kz10LngsdGhpcy55Kz10LnksdGhpc30sdC5wcm90b3R5cGUuc3VidHJhY3Q9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueC09dC54LHRoaXMueS09dC55LHRoaXN9LHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMuZGF0YSl9LHQuZGlzdGFuY2U9ZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5zcXJ0KCh0LngtZS54KSoodC54LWUueCkrKHQueS1lLnkpKih0LnktZS55KSl9LHQucmFkaWFucz1mdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLmF0YW4yKGUueS10LnksZS54LXQueCl9LHR9KCk7ZS5kZWZhdWx0PXJ9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcj1uKDIpO2UuQW5nbGU9ci5kZWZhdWx0O3ZhciBvPW4oMCk7ZS5Qb2ludD1vLmRlZmF1bHQ7dmFyIGk9bigzKTtlLlZlY3Rvcj1pLmRlZmF1bHR9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQudG9SYWRpYW5zPWZ1bmN0aW9uKHQpe3JldHVybiB0Kk1hdGguUEkvMTgwfSx0LnRvRGVncmVlcz1mdW5jdGlvbih0KXtyZXR1cm4gMTgwKnQvTWF0aC5QSX0sdC5pbnRlcnBvbGF0ZT1mdW5jdGlvbihlLG4scil7cmV0dXJuIHQubm9ybWFsaXplKGUrdC5kZWx0YShlLG4pKnIpfSx0LmRlbHRhPWZ1bmN0aW9uKGUsbil7dmFyIHI9dC5ub3JtYWxpemUoZSksbz10Lm5vcm1hbGl6ZShuKSxpPW8tcjtyZXR1cm4gTWF0aC5hYnMoaSk+TWF0aC5QSSYmKGk9by0yKk1hdGguUEktciksaX0sdC5ub3JtYWxpemU9ZnVuY3Rpb24odCl7dmFyIGU9dCUoMipNYXRoLlBJKTtyZXR1cm4gZTwwJiYoZSs9MipNYXRoLlBJKSxlfSx0fSgpO2UuZGVmYXVsdD1yfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHI9bigwKSxvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUsbil7dm9pZCAwPT09dCYmKHQ9MCksdm9pZCAwPT09ZSYmKGU9MCksdm9pZCAwPT09biYmKG49MCksdGhpcy5tb2RlbD17fSx0IGluc3RhbmNlb2Ygci5kZWZhdWx0Pyh0aGlzLm1vZGVsLnBvaW50PXQuY2xvbmUoKSx0aGlzLm1vZGVsLnJhZGlhbnM9ZSk6KHRoaXMubW9kZWwucG9pbnQ9bmV3IHIuZGVmYXVsdCh0LGUpLHRoaXMubW9kZWwucmFkaWFucz1uKX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwicG9pbnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kZWwucG9pbnQuY2xvbmUoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJ4XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1vZGVsLnBvaW50Lnh9LHNldDpmdW5jdGlvbih0KXt0aGlzLm1vZGVsLnBvaW50Lng9dH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJ5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1vZGVsLnBvaW50Lnl9LHNldDpmdW5jdGlvbih0KXt0aGlzLm1vZGVsLnBvaW50Lnk9dH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJyYWRpYW5zXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1vZGVsLnJhZGlhbnN9LHNldDpmdW5jdGlvbih0KXt0aGlzLm1vZGVsLnJhZGlhbnM9dH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJkYXRhXCIse2dldDpmdW5jdGlvbigpe3JldHVybnt4OnRoaXMueCx5OnRoaXMueSxyYWRpYW5zOnRoaXMucmFkaWFuc319LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHQodGhpcy5wb2ludCx0aGlzLnJhZGlhbnMpfSx0LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGEpfSx0fSgpO2UuZGVmYXVsdD1vfV0pfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZW9tLmpzLm1hcCJdLCJzb3VyY2VSb290IjoiIn0=